---
title: "STATS/CSE 780 - Homework assignment 1"
author: "Pao Zhu Vivian Hsu (Student number: 400547994)"
date: "`r format(Sys.time(), '%d %B, %Y')`"
format: pdf
editor: visual
execute:
  echo: false
  warning: false
  error: false
bibliography: A1.bib
fontsize: 11pt
geometry: 
  - margin = 1in
linestretch: 1.5
---

\newpage

```{r}
## PACKAGES ##

library(tidyverse)
library(ggplot2)
```

```{r}
## DATA LOADING AND CLEANSING ##

disposalDataRaw <- read_csv(file="NPRI-INRP_DisposalsEliminations_1993-present.csv", locale=locale(encoding="latin1"))

# Select a subset of the data so it only includes plastic and rubber waste that goes to the landfill (cannot be treated, processed or recycled).
disposalData <- disposalDataRaw %>%
  # Keep only plastic and rubber waste (NAICS starting with 326)
  filter(grepl("^326", `NAICS / Code_SCIAN`),
         `Category (English) / Catégorie (Anglais)` == "Landfill") %>%
  mutate("Quantity (Tonnes)" = if_else(`Units / Unités` == "kg", `Quantity / Quantité`/1000,`Quantity / Quantité`)) %>%
  group_by(`Reporting_Year / Année`,
           `NAICS / Code_SCIAN`,
           `NAICS Title / Titre Code_SCIAN`,
           `PROVINCE`) %>%
  summarize("Quantity (Tonnes)" = sum(`Quantity (Tonnes)`)) %>%
  rename(Year = `Reporting_Year / Année`,
         "NAICS Code" = `NAICS / Code_SCIAN`,
         "NAICS Category" = `NAICS Title / Titre Code_SCIAN`,
         "Province" = `PROVINCE`)
```

```{r}
## WASTE QUANTITY BY PROVINCE AND YEAR ##

# Preliminary data transformation
disposalData_line <- disposalData %>% 
  group_by(`Year`,`Province`) %>%
  summarize("Quantity (Tonnes)" = sum(`Quantity (Tonnes)`))

# Plot line graph
disposalData_line %>% 
  ggplot(aes(x=`Year`, y=`Quantity (Tonnes)`, color=`Province`)) +
  geom_line()
```

```{r}
## WASTE QUANTITY BY YEAR AGGREGATED TO COUNTRY-LEVEL ##

# Preliminary data transformation
disposalData_line <- disposalData %>% 
  group_by(`Year`) %>%
  summarize("Quantity (Tonnes)" = sum(`Quantity (Tonnes)`))

# Plot line graph
disposalData_line %>% 
  ggplot(aes(x=`Year`, y=`Quantity (Tonnes)`)) +
  geom_line()
```


## Introduction

## Methods

## Results

## Discussion

\newpage

## Supplementary material

\newpage

## References
